<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nyx Property Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            m        <!-- Knowledge Base Tab -->
        <div id="knowledge-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üß† Knowledge Base & Guest Information</h2>
                <button class="btn" onclick="openAddArticleModal()" style="width: auto; padding: 8px 16px;">+ Add Article</button>
            </div>
            
            <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                <input type="text" placeholder="Search articles..." style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <select style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Categories</option>
                    <option>Property Info</option>
                    <option>Guest Instructions</option>
                    <option>Emergency Procedures</option>
                    <option>Local Area</option>
                    <option>Troubleshooting</option>
                </select>
            </div>
            
            <div style="display: grid; grid-template-columns: 300px 1fr; gap: 20px;">
                <!-- Categories Sidebar -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; height: fit-content;">
                    <h3 style="margin-bottom: 15px;">Categories</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('property')">üè† Property Information</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('guest')">üë• Guest Instructions</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('emergency')">üö® Emergency Procedures</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('local')">üìç Local Area Guide</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('troubleshoot')">üîß Troubleshooting</li>
                    </ul>
                </div>
                
                <!-- Articles Content -->
                <div style="display: grid; gap: 15px;">
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üì∂ WiFi & Internet Access</h4>
                                <span style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Property Info</span>
                            </div>
                            <button onclick="editArticle(1)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Speranta WiFi:</strong></p>
                            <p>‚Ä¢ Network: SperantaGuest2024</p>
                            <p>‚Ä¢ Password: SperantaGuest2024</p>
                            <p><strong>TV House WiFi:</strong></p>
                            <p>‚Ä¢ Network: TVHouseGuest2024</p>
                            <p>‚Ä¢ Password: TVHouseGuest2024</p>
                            <p><strong>If having connection issues:</strong></p>
                            <p>1. Restart your device's WiFi</p>
                            <p>2. Router reset button is in kitchen cabinet</p>
                            <p>3. Contact Nina: +27 123 456 789</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üö™ Access Codes & Keys</h4>
                                <span style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Property Info</span>
                            </div>
                            <button onclick="editArticle(2)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Speranta (35 Athens Road, Blouberg):</strong></p>
                            <p>‚Ä¢ Gate Code: 7481</p>
                            <p>‚Ä¢ Front door: Smart lock (code sent via SMS)</p>
                            <p>‚Ä¢ Backup key: In lockbox by front door</p>
                            <p><strong>TV House (110 Athens Road, Tableview):</strong></p>
                            <p>‚Ä¢ Gate Code: 2847</p>
                            <p>‚Ä¢ Front door: Physical key in lockbox</p>
                            <p>‚Ä¢ Lockbox code: Same as gate code</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üì± Emergency Contacts</h4>
                                <span style="background: #ffebee; color: #d32f2f; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Emergency</span>
                            </div>
                            <button onclick="editArticle(3)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Property Manager:</strong> Nina - +27 123 456 789</p>
                            <p><strong>Admin:</strong> Nicole - +27 987 654 321</p>
                            <p><strong>Local Emergency:</strong> 10177 (Police), 10177 (Fire/Medical)</p>
                            <p><strong>Electricity:</strong> City of Cape Town - 0860 103 089</p>
                            <p><strong>Water:</strong> City of Cape Town - 0860 103 089</p>
                            <p><strong>Security Company:</strong> ADT - 0860 123 456</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üèñÔ∏è Local Area & Attractions</h4>
                                <span style="background: #f3e5f5; color: #7b1fa2; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Local Area</span>
                            </div>
                            <button onclick="editArticle(4)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Nearby Beaches:</strong></p>
                            <p>‚Ä¢ Big Bay Beach - 2 min walk</p>
                            <p>‚Ä¢ Blouberg Beach - 5 min drive</p>
                            <p>‚Ä¢ Table View Beach - 3 min drive</p>
                            <p><strong>Restaurants & Shopping:</strong></p>
                            <p>‚Ä¢ Big Bay Mall - 5 min drive</p>
                            <p>‚Ä¢ Sunset Beach Restaurant - 10 min walk</p>
                            <p>‚Ä¢ Eden on the Bay - 8 min drive</p>
                            <p><strong>Activities:</strong></p>
                            <p>‚Ä¢ Kite surfing lessons at Big Bay</p>
                            <p>‚Ä¢ Table Mountain tours</p>
                            <p>‚Ä¢ V&A Waterfront - 25 min drive</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üîß Common Issues & Solutions</h4>
                                <span style="background: #fff3e0; color: #f57c00; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Troubleshooting</span>
                            </div>
                            <button onclick="editArticle(5)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>No Hot Water:</strong></p>
                            <p>‚Ä¢ Check geyser switch in kitchen</p>
                            <p>‚Ä¢ Wait 30 minutes for heating</p>
                            <p>‚Ä¢ If still cold, contact Nina</p>
                            <p><strong>TV Not Working:</strong></p>
                            <p>‚Ä¢ Check DSTV decoder power</p>
                            <p>‚Ä¢ Try different HDMI input</p>
                            <p>‚Ä¢ Remote batteries in kitchen drawer</p>
                            <p><strong>Air Conditioning:</strong></p>
                            <p>‚Ä¢ Remote control on bedside table</p>
                            <p>‚Ä¢ Set to cool mode, temp 22¬∞C</p>
                            <p>‚Ä¢ Close all windows and doors</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>ight: 100vh;
        }
        
        .login-section {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-container {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
        }
        
        .logo {
            color: #667eea;
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }
        
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .dashboard-section {
            display: none;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .dashboard-header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .dashboard-title {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #333;
        }
        
        .quick-dashboard {
            display: none;
            margin-bottom: 20px;
        }
        
        .compact-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .compact-metric {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .compact-metric:hover {
            transform: translateY(-2px);
        }
        
        .nav-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .nav-tab {
            background: rgba(255,255,255,0.9);
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .nav-tab.active {
            background: #007bff;
            color: white;
        }
        
        .nav-tab:hover {
            background: #0056b3;
            color: white;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            min-height: 500px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .property-card {
            background: #f8f9fa;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }
        
        .subtab-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .subtab-btn {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .subtab-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .subtab-content {
            display: none;
        }
        
        .subtab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Login Section -->
    <div id="loginSection" class="login-section">
        <div class="login-container">
            <div class="logo">üè†</div>
            <h1>Nyx Property Management</h1>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="sn_apt_management@outlook.com">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter your password">
            </div>
            <div style="margin-bottom: 15px;">
                <button type="button" onclick="fillAdminCredentials()" style="background: #007bff; color: white; padding: 8px 12px; border: none; border-radius: 4px; margin-right: 10px; cursor: pointer;">Fill Admin</button>
                <button type="button" onclick="fillNinaCredentials()" style="background: #28a745; color: white; padding: 8px 12px; border: none; border-radius: 4px; cursor: pointer;">Fill Nina</button>
            </div>
            <button class="btn" onclick="login()">Login</button>
        </div>
    </div>

    <!-- Quick Dashboard -->
    <div id="quickDashboard" class="quick-dashboard">
        <div class="compact-metrics">
            <div class="compact-metric occupancy" onclick="showTab('reports')">
                <div>üìä <strong>Occupancy Rate</strong></div>
                <div style="font-size: 24px; color: #28a745;">96%</div>
                <div style="font-size: 12px; color: #6c757d;">Target: 90%</div>
            </div>
            <div class="compact-metric revenue" onclick="showTab('financial')">
                <div>üí∞ <strong>Monthly Revenue</strong></div>
                <div style="font-size: 24px; color: #007bff;">R58,145</div>
                <div style="font-size: 12px; color: #6c757d;">Goal: R60,000</div>
            </div>
            <div class="compact-metric checkins" onclick="showTab('checkin')">
                <div>‚úÖ <strong>Today</strong></div>
                <div style="font-size: 24px; color: #17a2b8;">3 Check-ins | 2 Check-outs</div>
                <div style="font-size: 12px; color: #6c757d;">Next: 2pm arrival</div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboardSection" class="dashboard-section">
        <div class="dashboard-header">
            <div class="dashboard-title">
                <span>üè†</span>
                <h2>Property Management Dashboard</h2>
                <span>üëã Welcome, Nicole!</span>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('properties')">üè† Properties</button>
            <button class="nav-tab" onclick="showTab('bookings')">üìÖ Bookings</button>
            <button class="nav-tab" onclick="showTab('checkin')">‚úÖ Check-in</button>
            <button class="nav-tab" onclick="showTab('domestic')">üßπ Domestic</button>
            <button class="nav-tab" onclick="showTab('tasks')">üìã Tasks</button>
            <button class="nav-tab" onclick="showTab('knowledge')">üìö Knowledge Base</button>
            <button class="nav-tab" onclick="showTab('invoices')">üìÑ Invoices</button>
            <button class="nav-tab" onclick="showTab('reports')">üìà Reports</button>
            <button class="nav-tab" onclick="showTab('financial')">üí∞ Financial</button>
        </div>

        <!-- Properties Tab -->
        <div id="properties-tab" class="tab-content active">
            <h2>üè† Property Overview</h2>
            <div class="property-card">
                <h3>üåü Speranta Property</h3>
                <p><strong>Address:</strong> 35 Athens Road, Blouberg</p>
                <p><strong>Type:</strong> 2BR Apartment | Max 4 Guests</p>
                <p><strong>WiFi:</strong> SperantaGuest2024 | <strong>Gate Code:</strong> 7481</p>
                <p><strong>Status:</strong> ‚úÖ Active | Next Check-in: Oct 17, 3:00 PM</p>
            </div>
            <div class="property-card">
                <h3>üè° TV House Property</h3>
                <p><strong>Address:</strong> 110 Athens Road, Tableview</p>
                <p><strong>Type:</strong> 3BR House | Max 6 Guests</p>
                <p><strong>WiFi:</strong> TVHouseGuest2024 | <strong>Gate Code:</strong> 2847</p>
                <p><strong>Status:</strong> ‚úÖ Active | Next Check-in: Oct 16, 4:00 PM</p>
            </div>
        </div>

        <!-- Bookings Tab -->
        <div id="bookings-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üìÖ Booking Management</h2>
                <button class="btn" onclick="openAddBookingModal()" style="width: auto; padding: 8px 16px;">+ Manual Booking</button>
            </div>
            
            <!-- Platform Integration Status -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 25px;">
                <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 15px; text-align: center;">
                    <h4 style="margin: 0 0 8px 0; color: #155724;">üõèÔ∏è Booking.com</h4>
                    <p style="margin: 0; font-size: 14px; color: #155724;">‚úÖ Connected & Syncing</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Last sync: 2 min ago</p>
                </div>
                <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 15px; text-align: center;">
                    <h4 style="margin: 0 0 8px 0; color: #155724;">üè† Airbnb</h4>
                    <p style="margin: 0; font-size: 14px; color: #155724;">‚úÖ Connected & Syncing</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Last sync: 5 min ago</p>
                </div>
                <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 15px; text-align: center;">
                    <h4 style="margin: 0 0 8px 0; color: #155724;">üåü LekkeSlaap</h4>
                    <p style="margin: 0; font-size: 14px; color: #155724;">‚úÖ Connected & Syncing</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Last sync: 1 min ago</p>
                </div>
                <div style="background: #d4edda; border: 1px solid #c3e6cb; border-radius: 8px; padding: 15px; text-align: center;">
                    <h4 style="margin: 0 0 8px 0; color: #155724;">üèñÔ∏è FeWo-direkt</h4>
                    <p style="margin: 0; font-size: 14px; color: #155724;">‚úÖ Connected & Syncing</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Last sync: 3 min ago</p>
                </div>
            </div>
            
            <!-- Booking Filters -->
            <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Properties</option>
                    <option>Speranta</option>
                    <option>TV House</option>
                </select>
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Platforms</option>
                    <option>Booking.com</option>
                    <option>Airbnb</option>
                    <option>LekkeSlaap</option>
                    <option>FeWo-direkt</option>
                    <option>Direct</option>
                </select>
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Status</option>
                    <option>Confirmed</option>
                    <option>Pending</option>
                    <option>Checked-in</option>
                    <option>Checked-out</option>
                    <option>Cancelled</option>
                </select>
                <input type="month" value="2025-10" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <!-- Current & Upcoming Bookings -->
            <div style="background: #fff; border-radius: 8px; padding: 20px; margin-bottom: 20px; border: 1px solid #e0e0e0;">
                <h3 style="margin-bottom: 15px;">üî• Current & Upcoming Bookings</h3>
                
                <!-- Active Booking -->
                <div style="background: #e8f5e8; border-left: 4px solid #4caf50; padding: 15px; margin-bottom: 15px; border-radius: 0 8px 8px 0;">
                    <div style="display: flex; justify-content: between; align-items: start;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="background: #4caf50; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: bold;">CHECKED-IN</span>
                                <span style="background: #2196f3; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Booking.com</span>
                                <span style="background: #ff9800; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">TV House</span>
                            </div>
                            <h4 style="margin: 0 0 5px 0;">üë´ Johann & Maria Weber</h4>
                            <p style="margin: 0 0 8px 0; color: #666; font-size: 14px;">üìß j.weber@email.de | üì± +49 30 123456789</p>
                            <p style="margin: 0; font-size: 14px;"><strong>üìÖ Oct 14-18, 2025</strong> (4 nights) | üí∞ ‚Ç¨320 total | üë• 2 guests</p>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="viewBookingDetails('BK001')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üìã Details</button>
                            <button onclick="contactGuest('BK001')" style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üí¨ Contact</button>
                        </div>
                    </div>
                </div>
                
                <!-- Upcoming Booking -->
                <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-bottom: 15px; border-radius: 0 8px 8px 0;">
                    <div style="display: flex; justify-content: between; align-items: start;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="background: #ffc107; color: #212529; padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: bold;">ARRIVING TOMORROW</span>
                                <span style="background: #e91e63; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Airbnb</span>
                                <span style="background: #9c27b0; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Speranta</span>
                            </div>
                            <h4 style="margin: 0 0 5px 0;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ The Smith Family</h4>
                            <p style="margin: 0 0 8px 0; color: #666; font-size: 14px;">üìß smith.family@outlook.com | üì± +27 82 555 1234</p>
                            <p style="margin: 0; font-size: 14px;"><strong>üìÖ Oct 17-21, 2025</strong> (4 nights) | üí∞ R8,500 total | üë• 4 guests</p>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="prepareCheckIn('BK002')" style="background: #17a2b8; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üîë Prep Check-in</button>
                            <button onclick="viewBookingDetails('BK002')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üìã Details</button>
                        </div>
                    </div>
                </div>
                
                <!-- Future Booking -->
                <div style="background: #f8f9fa; border-left: 4px solid #6c757d; padding: 15px; border-radius: 0 8px 8px 0;">
                    <div style="display: flex; justify-content: between; align-items: start;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                                <span style="background: #6c757d; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px; font-weight: bold;">CONFIRMED</span>
                                <span style="background: #795548; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">LekkeSlaap</span>
                                <span style="background: #ff9800; color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px;">TV House</span>
                            </div>
                            <h4 style="margin: 0 0 5px 0;">üíº David Johnson (Business)</h4>
                            <p style="margin: 0 0 8px 0; color: #666; font-size: 14px;">üìß d.johnson@corporate.com | üì± +27 21 456 7890</p>
                            <p style="margin: 0; font-size: 14px;"><strong>üìÖ Oct 22-25, 2025</strong> (3 nights) | üí∞ R6,750 total | üë• 1 guest</p>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="viewBookingDetails('BK003')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üìã Details</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Monthly Calendar View -->
            <div style="background: #fff; border-radius: 8px; padding: 20px; border: 1px solid #e0e0e0;">
                <h3 style="margin-bottom: 15px;">üìÖ October 2025 Calendar</h3>
                <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; background: #f8f9fa; padding: 10px; border-radius: 8px;">
                    <!-- Calendar Header -->
                    <div style="background: #495057; color: white; padding: 8px; text-align: center; font-weight: bold; font-size: 12px;">MON</div>
                    <div style="background: #495057; color: white; padding: 8px; text-align: center; font-weight: bold; font-size: 12px;">TUE</div>
                    <div style="background: #495057; color: white; padding: 8px; text-align: center; font-weight: bold; font-size: 12px;">WED</div>
                    <div style="background: #495057; color: white; padding: 8px; text-align: center; font-weight: bold; font-size: 12px;">THU</div>
                    <div style="background: #495057; color: white; padding: 8px; text-align: center; font-weight: bold; font-size: 12px;">FRI</div>
                    <div style="background: #495057; color: white; padding: 8px; text-align: center; font-weight: bold; font-size: 12px;">SAT</div>
                    <div style="background: #495057; color: white; padding: 8px; text-align: center; font-weight: bold; font-size: 12px;">SUN</div>
                    
                    <!-- Calendar Days -->
                    <div style="background: #e9ecef; padding: 8px; text-align: center; min-height: 50px; font-size: 12px; color: #6c757d;">29</div>
                    <div style="background: #e9ecef; padding: 8px; text-align: center; min-height: 50px; font-size: 12px; color: #6c757d;">30</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">1</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">2</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">3</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">4</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">5</div>
                    
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">6</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">7</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">8</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">9</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">10</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">11</div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">12</div>
                    
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">13</div>
                    <div style="background: #4caf50; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px; position: relative;">14<br><span style="font-size: 8px;">Weber ‚úàÔ∏è</span></div>
                    <div style="background: #4caf50; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">15<br><span style="font-size: 8px;">Weber</span></div>
                    <div style="background: #007bff; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px; border: 2px solid #dc3545;">16<br><span style="font-size: 8px;">TODAY</span></div>
                    <div style="background: #ffc107; color: #212529; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">17<br><span style="font-size: 8px;">Smith ‚úàÔ∏è</span></div>
                    <div style="background: #4caf50; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">18<br><span style="font-size: 8px;">Weber ‚úàÔ∏è</span></div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">19</div>
                    
                    <div style="background: #e91e63; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">20<br><span style="font-size: 8px;">Smith</span></div>
                    <div style="background: #e91e63; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">21<br><span style="font-size: 8px;">Smith ‚úàÔ∏è</span></div>
                    <div style="background: #795548; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">22<br><span style="font-size: 8px;">Johnson ‚úàÔ∏è</span></div>
                    <div style="background: #795548; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">23<br><span style="font-size: 8px;">Johnson</span></div>
                    <div style="background: #795548; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">24<br><span style="font-size: 8px;">Johnson</span></div>
                    <div style="background: #795548; color: white; padding: 8px; text-align: center; min-height: 50px; font-size: 10px;">25<br><span style="font-size: 8px;">Johnson ‚úàÔ∏è</span></div>
                    <div style="background: white; padding: 8px; text-align: center; min-height: 50px; font-size: 12px;">26</div>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 15px; font-size: 12px;">
                    <div style="display: flex; align-items: center; gap: 5px;"><div style="width: 15px; height: 15px; background: #4caf50; border-radius: 2px;"></div> Booking.com</div>
                    <div style="display: flex; align-items: center; gap: 5px;"><div style="width: 15px; height: 15px; background: #e91e63; border-radius: 2px;"></div> Airbnb</div>
                    <div style="display: flex; align-items: center; gap: 5px;"><div style="width: 15px; height: 15px; background: #795548; border-radius: 2px;"></div> LekkeSlaap</div>
                    <div style="display: flex; align-items: center; gap: 5px;"><div style="width: 15px; height: 15px; background: #ffc107; border-radius: 2px;"></div> Check-in Day</div>
                </div>
            </div>
        </div>

        <!-- Check-in Tab -->
        <div id="checkin-tab" class="tab-content">
            <h2>‚úÖ Check-in Management</h2>
            <div class="subtab-nav">
                <button class="subtab-btn active" onclick="showCheckinSubtab('bookings')">üìã Booking Management</button>
                <button class="subtab-btn" onclick="showCheckinSubtab('inspections')">üîç Monthly Inspections</button>
            </div>
            
            <div id="checkin-bookings-subtab" class="subtab-content active">
                <h3>üìã Current Check-ins & Departures</h3>
                
                <!-- Today's Activities -->
                <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                    <h4 style="margin-bottom: 10px;">üìÖ Today's Schedule - October 16, 2025</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                        <div>
                            <h5 style="color: #856404;">üè† Current Guests</h5>
                            <p>‚Ä¢ <strong>Weber Family</strong> - TV House (Until Oct 18)</p>
                            <p>‚Ä¢ Check-in completed Oct 14</p>
                        </div>
                        <div>
                            <h5 style="color: #856404;">‚úàÔ∏è Tomorrow's Arrivals</h5>
                            <p>‚Ä¢ <strong>Smith Family</strong> - Speranta (Oct 17-21)</p>
                            <p>‚Ä¢ Airbnb booking, 4 guests</p>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Check-in Actions -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <button onclick="startCheckIn()" style="background: #28a745; color: white; border: none; padding: 20px; border-radius: 8px; cursor: pointer; text-align: left;">
                        <h4 style="margin: 0 0 8px 0;">üîë Start New Check-in</h4>
                        <p style="margin: 0; opacity: 0.9;">Begin check-in process for arriving guests</p>
                    </button>
                    <button onclick="prepareProperty()" style="background: #17a2b8; color: white; border: none; padding: 20px; border-radius: 8px; cursor: pointer; text-align: left;">
                        <h4 style="margin: 0 0 8px 0;">üè† Prepare Property</h4>
                        <p style="margin: 0; opacity: 0.9;">Ready property for next guests</p>
                    </button>
                    <button onclick="sendWelcomeMessage()" style="background: #6f42c1; color: white; border: none; padding: 20px; border-radius: 8px; cursor: pointer; text-align: left;">
                        <h4 style="margin: 0 0 8px 0;">üí¨ Send Welcome</h4>
                        <p style="margin: 0; opacity: 0.9;">Send welcome & access instructions</p>
                    </button>
                </div>
                
                <!-- Recent Check-ins -->
                <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                    <h4 style="margin-bottom: 15px;">üìã Recent Check-in Activity</h4>
                    
                    <div style="border-bottom: 1px solid #f0f0f0; padding: 15px 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h5 style="margin: 0 0 5px 0;">Weber Family - TV House</h5>
                                <p style="margin: 0; color: #666; font-size: 14px;">Checked in: Oct 14, 2025 at 3:30 PM</p>
                                <p style="margin: 5px 0 0 0; font-size: 14px;">Status: ‚úÖ <span style="color: #28a745; font-weight: bold;">Completed</span></p>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button onclick="viewCheckInDetails('W001')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üìã Details</button>
                                <button onclick="contactGuest('W001')" style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üí¨ Contact</button>
                            </div>
                        </div>
                    </div>
                    
                    <div style="padding: 15px 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h5 style="margin: 0 0 5px 0;">Smith Family - Speranta (Tomorrow)</h5>
                                <p style="margin: 0; color: #666; font-size: 14px;">Expected: Oct 17, 2025 at 4:00 PM</p>
                                <p style="margin: 5px 0 0 0; font-size: 14px;">Status: üü° <span style="color: #ffc107; font-weight: bold;">Preparing</span></p>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button onclick="prepareCheckIn('S001')" style="background: #17a2b8; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üîë Prepare</button>
                                <button onclick="sendPreArrivalMessage('S001')" style="background: #6f42c1; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üì± Message</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="checkin-inspections-subtab" class="subtab-content">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h3>üîç Monthly Property Inspections</h3>
                    <button class="btn" onclick="startNewInspection()" style="width: auto; padding: 8px 16px;">+ Start Inspection</button>
                </div>
                
                <!-- Property Selection -->
                <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                    <select id="inspection-property" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 200px;">
                        <option value="speranta">Speranta Property</option>
                        <option value="tv-house">TV House</option>
                    </select>
                    <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 150px;">
                        <option>October 2025</option>
                        <option>September 2025</option>
                        <option>August 2025</option>
                    </select>
                    <button onclick="loadInspectionHistory()" style="background: #17a2b8; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">üìã Load History</button>
                </div>
                
                <!-- Inspection Progress -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <h4>üìä Current Inspection Progress</h4>
                        <span style="background: #ffc107; color: #212529; padding: 4px 12px; border-radius: 12px; font-size: 14px; font-weight: bold;">In Progress</span>
                    </div>
                    <div style="background: #e9ecef; height: 20px; border-radius: 10px; overflow: hidden;">
                        <div style="background: linear-gradient(90deg, #28a745, #20c997); height: 100%; width: 60%; border-radius: 10px; position: relative;">
                            <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); color: white; font-weight: bold; font-size: 12px;">60% Complete</span>
                        </div>
                    </div>
                    <p style="margin: 10px 0 0 0; font-size: 14px; color: #666;">3 of 5 categories completed ‚Ä¢ Started: Oct 15, 2025</p>
                </div>
                
                <!-- Inspection Categories -->
                <div style="display: grid; gap: 15px;">
                    <!-- Kitchen & Living Area -->
                    <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="display: flex; align-items: center; gap: 10px; margin: 0;">
                                <span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 50%; font-size: 12px;">‚úì</span>
                                üçΩÔ∏è Kitchen & Living Area
                            </h4>
                            <button onclick="editInspectionCategory('kitchen')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">‚úèÔ∏è Edit</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="kitchen-cleanliness">
                                <label for="kitchen-cleanliness">Overall cleanliness</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="appliances-working">
                                <label for="appliances-working">All appliances working</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="supplies-stocked">
                                <label for="supplies-stocked">Supplies well stocked</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="furniture-condition">
                                <label for="furniture-condition">Furniture in good condition</label>
                            </div>
                        </div>
                        <textarea placeholder="Additional notes for kitchen & living area..." style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;">All appliances tested and working. New coffee machine installed. Living room furniture in excellent condition.</textarea>
                    </div>
                    
                    <!-- Bedrooms & Bedding -->
                    <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="display: flex; align-items: center; gap: 10px; margin: 0;">
                                <span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 50%; font-size: 12px;">‚úì</span>
                                üõèÔ∏è Bedrooms & Bedding
                            </h4>
                            <button onclick="editInspectionCategory('bedrooms')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">‚úèÔ∏è Edit</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="bedding-fresh">
                                <label for="bedding-fresh">Fresh bedding installed</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="mattress-condition">
                                <label for="mattress-condition">Mattresses in good condition</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="wardrobes-clean">
                                <label for="wardrobes-clean">Wardrobes clean & tidy</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="windows-clean">
                                <label for="windows-clean">Windows & blinds clean</label>
                            </div>
                        </div>
                        <textarea placeholder="Additional notes for bedrooms..." style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;">All rooms deep cleaned. New pillow protectors installed. Master bedroom curtains washed.</textarea>
                    </div>
                    
                    <!-- Bathrooms -->
                    <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="display: flex; align-items: center; gap: 10px; margin: 0;">
                                <span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 50%; font-size: 12px;">‚úì</span>
                                üöø Bathrooms
                            </h4>
                            <button onclick="editInspectionCategory('bathrooms')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">‚úèÔ∏è Edit</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="bathroom-deep-clean">
                                <label for="bathroom-deep-clean">Deep cleaned & sanitized</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="plumbing-check">
                                <label for="plumbing-check">Plumbing functioning properly</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="toiletries-stocked">
                                <label for="toiletries-stocked">Toiletries well stocked</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" checked id="towels-fresh">
                                <label for="towels-fresh">Fresh towels provided</label>
                            </div>
                        </div>
                        <textarea placeholder="Additional notes for bathrooms..." style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;">Shower head replacement needed in main bathroom - task already created. Hot water working perfectly.</textarea>
                    </div>
                    
                    <!-- Exterior & Outdoor -->
                    <div style="background: #fff; border: 1px solid #ffc107; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="display: flex; align-items: center; gap: 10px; margin: 0;">
                                <span style="background: #ffc107; color: #212529; padding: 4px 8px; border-radius: 50%; font-size: 12px;">!</span>
                                üè° Exterior & Outdoor Areas
                            </h4>
                            <button onclick="editInspectionCategory('exterior')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">‚úèÔ∏è Edit</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="garden-maintenance">
                                <label for="garden-maintenance">Garden well maintained</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="pool-clean">
                                <label for="pool-clean">Pool clean & safe</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="outdoor-furniture">
                                <label for="outdoor-furniture">Outdoor furniture clean</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="security-systems">
                                <label for="security-systems">Security systems functional</label>
                            </div>
                        </div>
                        <textarea placeholder="Additional notes for exterior areas..." style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;">Pool filter needs attention - maintenance task created. Garden looks great after recent landscaping.</textarea>
                    </div>
                    
                    <!-- Safety & Security -->
                    <div style="background: #fff; border: 1px solid #dc3545; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="display: flex; align-items: center; gap: 10px; margin: 0;">
                                <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 50%; font-size: 12px;">‚è≥</span>
                                üîí Safety & Security
                            </h4>
                            <button onclick="editInspectionCategory('safety')" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">‚úèÔ∏è Edit</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; margin-bottom: 15px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="smoke-detectors">
                                <label for="smoke-detectors">Smoke detectors working</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="fire-extinguisher">
                                <label for="fire-extinguisher">Fire extinguisher accessible</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="locks-working">
                                <label for="locks-working">All locks functioning</label>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="emergency-info">
                                <label for="emergency-info">Emergency info visible</label>
                            </div>
                        </div>
                        <textarea placeholder="Additional notes for safety & security..." style="width: 100%; height: 60px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                    </div>
                </div>
                
                <!-- Inspection Actions -->
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 20px; text-align: center;">
                    <h4 style="margin-bottom: 15px;">‚úÖ Complete Inspection</h4>
                    <div style="display: flex; gap: 15px; justify-content: center; align-items: center; margin-bottom: 15px;">
                        <label style="display: flex; align-items: center; gap: 8px; font-weight: bold;">
                            <input type="checkbox" id="inspector-signature">
                            Inspector Digital Signature
                        </label>
                        <input type="text" placeholder="Inspector name" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 200px;">
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="saveInspectionDraft()" style="background: #6c757d; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer;">üíæ Save Draft</button>
                        <button onclick="completeInspection()" style="background: #28a745; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer;">‚úÖ Complete Inspection</button>
                        <button onclick="generateInspectionReport()" style="background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer;">üìã Generate Report</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Domestic Tab -->
        <div id="domestic-tab" class="tab-content">
            <div style="margin-bottom: 20px;">
                <button class="btn" onclick="addDomesticSchedule()" style="width: auto; padding: 8px 16px;">+ Schedule Domestic</button>
            </div>
            
            <div class="domestic-rates" style="margin-bottom: 30px;">
                <h3>üí∞ Daily Cleaning Rates</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 15px 0;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <span style="font-weight: bold;">üåü Speranta Property:</span>
                        <span style="color: #28a745; font-size: 18px; float: right;">R350/day</span>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <span style="font-weight: bold;">üè¢ TV House Property:</span>
                        <span style="color: #28a745; font-size: 18px; float: right;">R400/day</span>
                    </div>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid #28a745;">
                    <h3>üë©‚Äçüè† Spiwe</h3>
                    <div style="margin: 10px 0;">
                        <p><strong>Properties:</strong> Speranta & TV House</p>
                        <p><strong>Schedule:</strong> Tuesday & Thursday</p>
                        <p><strong>Rate:</strong> R350/day (Speranta), R400/day (TV House)</p>
                        <p><strong>Specialties:</strong> Deep cleaning, Kitchen maintenance</p>
                        <p><strong>Contact:</strong> +27 83 456 7890</p>
                        <p><strong>Languages:</strong> English, Afrikaans, Xhosa</p>
                    </div>
                    <div style="margin-top: 15px;">
                        <span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">Available</span>
                        <span style="background: #007bff; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-left: 5px;">Preferred</span>
                    </div>
                </div>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; border-left: 4px solid #17a2b8;">
                    <h3>üë©‚Äçüè† Patricia</h3>
                    <div style="margin: 10px 0;">
                        <p><strong>Properties:</strong> TV House (Primary)</p>
                        <p><strong>Schedule:</strong> Monday & Wednesday</p>
                        <p><strong>Rate:</strong> R380/day (Both properties)</p>
                        <p><strong>Specialties:</strong> Garden maintenance, Pool cleaning</p>
                        <p><strong>Contact:</strong> +27 82 123 4567</p>
                        <p><strong>Languages:</strong> English, Zulu</p>
                    </div>
                    <div style="margin-top: 15px;">
                        <span style="background: #ffc107; color: black; padding: 4px 8px; border-radius: 4px; font-size: 12px;">Busy Today</span>
                        <span style="background: #6c757d; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; margin-left: 5px;">Backup</span>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 30px;">
                <h3>üìÖ This Week's Schedule</h3>
                <div style="background: white; border: 1px solid #dee2e6; border-radius: 8px; overflow: hidden;">
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); background: #f8f9fa;">
                        <div style="padding: 10px; text-align: center; font-weight: bold; border-right: 1px solid #dee2e6;">Mon</div>
                        <div style="padding: 10px; text-align: center; font-weight: bold; border-right: 1px solid #dee2e6;">Tue</div>
                        <div style="padding: 10px; text-align: center; font-weight: bold; border-right: 1px solid #dee2e6;">Wed</div>
                        <div style="padding: 10px; text-align: center; font-weight: bold; border-right: 1px solid #dee2e6;">Thu</div>
                        <div style="padding: 10px; text-align: center; font-weight: bold; border-right: 1px solid #dee2e6;">Fri</div>
                        <div style="padding: 10px; text-align: center; font-weight: bold; border-right: 1px solid #dee2e6;">Sat</div>
                        <div style="padding: 10px; text-align: center; font-weight: bold;">Sun</div>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(7, 1fr); min-height: 120px;">
                        <div style="padding: 10px; border-right: 1px solid #dee2e6;">
                            <div style="background: #e3f2fd; padding: 8px; border-radius: 4px; font-size: 12px;">
                                <strong>Patricia</strong><br>TV House<br>9:00 AM
                            </div>
                        </div>
                        <div style="padding: 10px; border-right: 1px solid #dee2e6;">
                            <div style="background: #e8f5e8; padding: 8px; border-radius: 4px; font-size: 12px;">
                                <strong>Spiwe</strong><br>Speranta<br>10:00 AM
                            </div>
                        </div>
                        <div style="padding: 10px; border-right: 1px solid #dee2e6;">
                            <div style="background: #e3f2fd; padding: 8px; border-radius: 4px; font-size: 12px;">
                                <strong>Patricia</strong><br>TV House<br>9:00 AM
                            </div>
                        </div>
                        <div style="padding: 10px; border-right: 1px solid #dee2e6;">
                            <div style="background: #e8f5e8; padding: 8px; border-radius: 4px; font-size: 12px;">
                                <strong>Spiwe</strong><br>Both Properties<br>8:00 AM
                            </div>
                        </div>
                        <div style="padding: 10px; border-right: 1px solid #dee2e6;"></div>
                        <div style="padding: 10px; border-right: 1px solid #dee2e6;"></div>
                        <div style="padding: 10px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tasks Tab -->
        <div id="tasks-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üìã Task Management</h2>
                <button class="btn" onclick="openAddTaskModal()" style="width: auto; padding: 8px 16px;">+ Add New Task</button>
            </div>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Assignees</option>
                    <option>Nicole (You)</option>
                    <option>Nina</option>
                    <option>Spiwe</option>
                    <option>Patricia</option>
                </select>
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Status</option>
                    <option>Pending</option>
                    <option>In Progress</option>
                    <option>Completed</option>
                </select>
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Properties</option>
                    <option>Speranta</option>
                    <option>TV House</option>
                    <option>Both</option>
                </select>
            </div>
            
            <div style="display: grid; gap: 15px;">
                <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1;">
                            <h4 style="margin-bottom: 8px; cursor: pointer;" onclick="editTaskTitle(this)" title="Click to edit">ÔøΩ Fix Pool Filter - TV House</h4>
                            <p style="margin-bottom: 10px; cursor: pointer;" onclick="editDescription(this)" title="Click to edit">Pool filter needs replacement after guest complaint about water clarity. Spare filter available in storage.</p>
                            <div style="display: flex; gap: 15px; font-size: 14px; color: #666;">
                                <span onclick="editAssignee(this)" style="cursor: pointer;">üë§ <strong>Assigned:</strong> Nina</span>
                                <span onclick="editProperty(this)" style="cursor: pointer;">üè¢ <strong>Property:</strong> TV House</span>
                                <span onclick="editDueDate(this)" style="cursor: pointer;">üìÖ <strong>Due:</strong> Oct 17, 2025</span>
                                <span onclick="editPriority(this)" style="cursor: pointer;">üü° <strong>Priority:</strong> Medium</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="openEditTaskModal(1)" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">‚úèÔ∏è</button>
                            <button onclick="duplicateTask(1)" style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üìã</button>
                            <button onclick="deleteTask(1)" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üóëÔ∏è</button>
                        </div>
                    </div>
                </div>
                
                <div style="background: #f8d7da; border-left: 4px solid #dc3545; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <input type="checkbox" onchange="updateTaskStatus(this)">
                                <h4 style="cursor: pointer;" onclick="editTaskTitle(this)" title="Click to edit">üöø Replace Shower Head - Speranta</h4>
                            </div>
                            <p style="margin-bottom: 10px; cursor: pointer;" onclick="editDescription(this)" title="Click to edit">Replace old shower head with new rainfall model as requested by guests.</p>
                            <div style="display: flex; gap: 15px; font-size: 14px; color: #666;">
                                <span onclick="editAssignee(this)" style="cursor: pointer;">üë§ <strong>Assigned:</strong> Nina</span>
                                <span onclick="editProperty(this)" style="cursor: pointer;">üè¢ <strong>Property:</strong> Speranta</span>
                                <span onclick="editDueDate(this)" style="cursor: pointer;">üìÖ <strong>Due:</strong> Oct 15, 2025</span>
                                <span onclick="editPriority(this)" style="cursor: pointer;">üî¥ <strong>Priority:</strong> High</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="openEditTaskModal(2)" style="background: #007bff; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">‚úèÔ∏è</button>
                            <button onclick="duplicateTask(2)" style="background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üìã</button>
                            <button onclick="deleteTask(2)" style="background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">üóëÔ∏è</button>
                        </div>
                    </div>
                </div>
                
                <div style="background: #d4edda; border-left: 4px solid #28a745; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                                <input type="checkbox" checked onchange="updateTaskStatus(this)">
                                <h4 style="text-decoration: line-through; color: #6c757d;">‚úÖ Deep Clean Completed - Both Properties</h4>
                            </div>
                            <p style="margin-bottom: 10px; color: #6c757d;">Weekly deep clean completed by Spiwe for both properties.</p>
                            <div style="display: flex; gap: 15px; font-size: 14px; color: #666;">
                                <span>üë§ <strong>Completed by:</strong> Spiwe</span>
                                <span>üè¢ <strong>Property:</strong> Both</span>
                                <span>‚úÖ <strong>Completed:</strong> Oct 14, 2025</span>
                                <span>üü¢ <strong>Priority:</strong> Low</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Knowledge Base Tab -->
        <div id="knowledge-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üß† Knowledge Base & Guest Information</h2>
                <button class="btn" onclick="openAddArticleModal()" style="width: auto; padding: 8px 16px;">+ Add Article</button>
            </div>
            
            <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                <input type="text" placeholder="Search articles..." style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <select style="width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Categories</option>
                    <option>Property Info</option>
                    <option>Guest Instructions</option>
                    <option>Emergency Procedures</option>
                    <option>Local Area</option>
                    <option>Troubleshooting</option>
                </select>
            </div>
            
            <div style="display: grid; grid-template-columns: 300px 1fr; gap: 20px;">
                <!-- Categories Sidebar -->
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; height: fit-content;">
                    <h3 style="margin-bottom: 15px;">Categories</h3>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('property')">üè† Property Information</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('guest')">üë• Guest Instructions</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('emergency')">üö® Emergency Procedures</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('local')">ÔøΩ Local Area Guide</li>
                        <li style="padding: 8px; cursor: pointer; border-radius: 4px; margin-bottom: 5px;" onclick="filterCategory('troubleshoot')">üîß Troubleshooting</li>
                    </ul>
                </div>
                
                <!-- Articles Content -->
                <div style="display: grid; gap: 15px;">
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üì∂ WiFi & Internet Access</h4>
                                <span style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Property Info</span>
                            </div>
                            <button onclick="editArticle(1)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Speranta WiFi:</strong></p>
                            <p>‚Ä¢ Network: SperantaGuest2024</p>
                            <p>‚Ä¢ Password: SperantaGuest2024</p>
                            <p><strong>TV House WiFi:</strong></p>
                            <p>‚Ä¢ Network: TVHouseGuest2024</p>
                            <p>‚Ä¢ Password: TVHouseGuest2024</p>
                            <p><strong>If having connection issues:</strong></p>
                            <p>1. Restart your device's WiFi</p>
                            <p>2. Router reset button is in kitchen cabinet</p>
                            <p>3. Contact Nina: +27 123 456 789</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üö™ Access Codes & Keys</h4>
                                <span style="background: #e3f2fd; color: #1976d2; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Property Info</span>
                            </div>
                            <button onclick="editArticle(2)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Speranta (35 Athens Road, Blouberg):</strong></p>
                            <p>‚Ä¢ Gate Code: 7481</p>
                            <p>‚Ä¢ Front door: Smart lock (code sent via SMS)</p>
                            <p>‚Ä¢ Backup key: In lockbox by front door</p>
                            <p><strong>TV House (110 Athens Road, Tableview):</strong></p>
                            <p>‚Ä¢ Gate Code: 2847</p>
                            <p>‚Ä¢ Front door: Physical key in lockbox</p>
                            <p>‚Ä¢ Lockbox code: Same as gate code</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üì± Emergency Contacts</h4>
                                <span style="background: #ffebee; color: #d32f2f; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Emergency</span>
                            </div>
                            <button onclick="editArticle(3)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Property Manager:</strong> Nina - +27 123 456 789</p>
                            <p><strong>Admin:</strong> Nicole - +27 987 654 321</p>
                            <p><strong>Local Emergency:</strong> 10177 (Police), 10177 (Fire/Medical)</p>
                            <p><strong>Electricity:</strong> City of Cape Town - 0860 103 089</p>
                            <p><strong>Water:</strong> City of Cape Town - 0860 103 089</p>
                            <p><strong>Security Company:</strong> ADT - 0860 123 456</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üèñÔ∏è Local Area & Attractions</h4>
                                <span style="background: #f3e5f5; color: #7b1fa2; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Local Area</span>
                            </div>
                            <button onclick="editArticle(4)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>Nearby Beaches:</strong></p>
                            <p>‚Ä¢ Big Bay Beach - 2 min walk</p>
                            <p>‚Ä¢ Blouberg Beach - 5 min drive</p>
                            <p>‚Ä¢ Table View Beach - 3 min drive</p>
                            <p><strong>Restaurants & Shopping:</strong></p>
                            <p>‚Ä¢ Big Bay Mall - 5 min drive</p>
                            <p>‚Ä¢ Sunset Beach Restaurant - 10 min walk</p>
                            <p>‚Ä¢ Eden on the Bay - 8 min drive</p>
                            <p><strong>Activities:</strong></p>
                            <p>‚Ä¢ Kite surfing lessons at Big Bay</p>
                            <p>‚Ä¢ Table Mountain tours</p>
                            <p>‚Ä¢ V&A Waterfront - 25 min drive</p>
                        </div>
                    </div>
                    
                    <div class="article-card" style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                            <div>
                                <h4 style="margin-bottom: 5px;">üîß Common Issues & Solutions</h4>
                                <span style="background: #fff3e0; color: #f57c00; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Troubleshooting</span>
                            </div>
                            <button onclick="editArticle(5)" style="background: none; border: none; cursor: pointer; font-size: 16px;">‚úèÔ∏è</button>
                        </div>
                        <div style="line-height: 1.6;">
                            <p><strong>No Hot Water:</strong></p>
                            <p>‚Ä¢ Check geyser switch in kitchen</p>
                            <p>‚Ä¢ Wait 30 minutes for heating</p>
                            <p>‚Ä¢ If still cold, contact Nina</p>
                            <p><strong>TV Not Working:</strong></p>
                            <p>‚Ä¢ Check DSTV decoder power</p>
                            <p>‚Ä¢ Try different HDMI input</p>
                            <p>‚Ä¢ Remote batteries in kitchen drawer</p>
                            <p><strong>Air Conditioning:</strong></p>
                            <p>‚Ä¢ Remote control on bedside table</p>
                            <p>‚Ä¢ Set to cool mode, temp 22¬∞C</p>
                            <p>‚Ä¢ Close all windows and doors</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Invoices Tab -->
        <div id="invoices-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üìÑ Invoices & Billing</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="generateInvoice()" style="width: auto; padding: 8px 16px;">+ Generate Invoice</button>
                    <button class="btn" onclick="exportInvoices()" style="width: auto; padding: 8px 16px; background: #17a2b8;">üìä Export</button>
                </div>
            </div>
            
            <!-- Invoice Summary Cards -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px;">
                <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 24px;">‚Ç¨2,840</h3>
                    <p style="margin: 0; opacity: 0.9;">October Revenue</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">+12% vs last month</p>
                </div>
                <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 24px;">‚Ç¨425</h3>
                    <p style="margin: 0; opacity: 0.9;">Outstanding</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">3 pending invoices</p>
                </div>
                <div style="background: linear-gradient(135deg, #dc3545, #e83e8c); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 24px;">‚Ç¨150</h3>
                    <p style="margin: 0; opacity: 0.9;">Overdue</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">1 invoice >30 days</p>
                </div>
                <div style="background: linear-gradient(135deg, #007bff, #6f42c1); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 24px;">‚Ç¨2,265</h3>
                    <p style="margin: 0; opacity: 0.9;">Paid This Month</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">8 invoices processed</p>
                </div>
            </div>
            
            <!-- Invoice Filters -->
            <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Status</option>
                    <option>Paid</option>
                    <option>Outstanding</option>
                    <option>Overdue</option>
                    <option>Draft</option>
                </select>
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>All Properties</option>
                    <option>Speranta</option>
                    <option>TV House</option>
                </select>
                <input type="month" value="2025-10" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <input type="text" placeholder="Search guest name or invoice #" style="flex: 1; min-width: 200px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <!-- Invoice List -->
            <div style="background: #fff; border-radius: 8px; border: 1px solid #e0e0e0;">
                <!-- Invoice Header -->
                <div style="display: grid; grid-template-columns: 120px 200px 150px 120px 120px 100px 120px auto; gap: 15px; padding: 15px 20px; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-weight: bold; font-size: 14px;">
                    <span>Invoice #</span>
                    <span>Guest</span>
                    <span>Property</span>
                    <span>Amount</span>
                    <span>Status</span>
                    <span>Date</span>
                    <span>Due Date</span>
                    <span>Actions</span>
                </div>
                
                <!-- Paid Invoice -->
                <div style="display: grid; grid-template-columns: 120px 200px 150px 120px 120px 100px 120px auto; gap: 15px; padding: 15px 20px; border-bottom: 1px solid #f0f0f0; align-items: center;">
                    <span style="font-weight: bold; color: #007bff;">INV-2025-001</span>
                    <div>
                        <div style="font-weight: bold;">Johann Weber</div>
                        <div style="font-size: 12px; color: #666;">j.weber@email.de</div>
                    </div>
                    <span>TV House</span>
                    <span style="font-weight: bold;">‚Ç¨320.00</span>
                    <span style="background: #d4edda; color: #155724; padding: 4px 8px; border-radius: 12px; font-size: 12px; text-align: center;">‚úÖ Paid</span>
                    <span>Oct 10</span>
                    <span>Oct 13</span>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="viewInvoice('INV-2025-001')" style="background: #007bff; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üëÅÔ∏è</button>
                        <button onclick="downloadInvoice('INV-2025-001')" style="background: #28a745; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üì•</button>
                    </div>
                </div>
                
                <!-- Outstanding Invoice -->
                <div style="display: grid; grid-template-columns: 120px 200px 150px 120px 120px 100px 120px auto; gap: 15px; padding: 15px 20px; border-bottom: 1px solid #f0f0f0; align-items: center;">
                    <span style="font-weight: bold; color: #007bff;">INV-2025-002</span>
                    <div>
                        <div style="font-weight: bold;">Smith Family</div>
                        <div style="font-size: 12px; color: #666;">smith.family@outlook.com</div>
                    </div>
                    <span>Speranta</span>
                    <span style="font-weight: bold;">R8,500.00</span>
                    <span style="background: #fff3cd; color: #856404; padding: 4px 8px; border-radius: 12px; font-size: 12px; text-align: center;">‚è≥ Outstanding</span>
                    <span>Oct 15</span>
                    <span>Oct 20</span>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="viewInvoice('INV-2025-002')" style="background: #007bff; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üëÅÔ∏è</button>
                        <button onclick="sendReminder('INV-2025-002')" style="background: #ffc107; color: #212529; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üìß</button>
                        <button onclick="downloadInvoice('INV-2025-002')" style="background: #28a745; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üì•</button>
                    </div>
                </div>
                
                <!-- Draft Invoice -->
                <div style="display: grid; grid-template-columns: 120px 200px 150px 120px 120px 100px 120px auto; gap: 15px; padding: 15px 20px; border-bottom: 1px solid #f0f0f0; align-items: center;">
                    <span style="font-weight: bold; color: #007bff;">INV-2025-003</span>
                    <div>
                        <div style="font-weight: bold;">David Johnson</div>
                        <div style="font-size: 12px; color: #666;">d.johnson@corporate.com</div>
                    </div>
                    <span>TV House</span>
                    <span style="font-weight: bold;">‚Ç¨225.00</span>
                    <span style="background: #e2e3e5; color: #495057; padding: 4px 8px; border-radius: 12px; font-size: 12px; text-align: center;">üìù Draft</span>
                    <span>Oct 16</span>
                    <span>-</span>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="editInvoice('INV-2025-003')" style="background: #6c757d; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">‚úèÔ∏è</button>
                        <button onclick="sendInvoice('INV-2025-003')" style="background: #17a2b8; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üì§</button>
                    </div>
                </div>
                
                <!-- Overdue Invoice -->
                <div style="display: grid; grid-template-columns: 120px 200px 150px 120px 120px 100px 120px auto; gap: 15px; padding: 15px 20px; align-items: center; background: #fee; border-left: 4px solid #dc3545;">
                    <span style="font-weight: bold; color: #007bff;">INV-2025-004</span>
                    <div>
                        <div style="font-weight: bold;">Sarah Miller</div>
                        <div style="font-size: 12px; color: #666;">s.miller@example.com</div>
                    </div>
                    <span>Speranta</span>
                    <span style="font-weight: bold;">‚Ç¨150.00</span>
                    <span style="background: #f8d7da; color: #721c24; padding: 4px 8px; border-radius: 12px; font-size: 12px; text-align: center;">üö® Overdue</span>
                    <span>Sep 10</span>
                    <span style="color: #dc3545; font-weight: bold;">Sep 15</span>
                    <div style="display: flex; gap: 5px;">
                        <button onclick="viewInvoice('INV-2025-004')" style="background: #007bff; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üëÅÔ∏è</button>
                        <button onclick="sendUrgentReminder('INV-2025-004')" style="background: #dc3545; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">‚ö†Ô∏è</button>
                        <button onclick="initiateCollection('INV-2025-004')" style="background: #6f42c1; color: white; border: none; padding: 3px 8px; border-radius: 3px; cursor: pointer; font-size: 12px;">üìû</button>
                    </div>
                </div>
            </div>
            
            <!-- Invoice Breakdown Template (shown when creating new invoice) -->
            <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-top: 20px; border: 1px solid #e0e0e0;">
                <h4 style="margin-bottom: 15px;">üí∞ Standard Invoice Breakdown</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; font-size: 14px;">
                    <div>
                        <h5>Accommodation Charges:</h5>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Nightly Rate √ó Number of Nights</li>
                            <li>Weekend Premium (+15% Fri-Sun)</li>
                            <li>Peak Season Surcharge (Dec-Jan)</li>
                        </ul>
                    </div>
                    <div>
                        <h5>Additional Charges:</h5>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Cleaning Fee: R200-300</li>
                            <li>Security Deposit (refundable)</li>
                            <li>Platform Commission (10-15%)</li>
                            <li>Tourism Levy (where applicable)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Reports Tab -->
        <div id="reports-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üìà Analytics & Reports</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="generateReport()" style="width: auto; padding: 8px 16px;">üìä Generate Report</button>
                    <button class="btn" onclick="scheduleReport()" style="width: auto; padding: 8px 16px; background: #17a2b8;">‚è∞ Schedule</button>
                </div>
            </div>
            
            <!-- Date Range Selector -->
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px; display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                <label style="font-weight: bold;">Report Period:</label>
                <select style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    <option>Last 7 Days</option>
                    <option>Last 30 Days</option>
                    <option selected>This Month</option>
                    <option>Last Month</option>
                    <option>This Quarter</option>
                    <option>This Year</option>
                    <option>Custom Range</option>
                </select>
                <input type="date" value="2025-10-01" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <span style="margin: 0 5px;">to</span>
                <input type="date" value="2025-10-16" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                <button onclick="refreshReports()" style="background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">üîÑ Refresh</button>
            </div>
            
            <!-- Key Metrics Dashboard -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 25px;">
                <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 32px;">87%</h3>
                    <p style="margin: 0; opacity: 0.9; font-size: 16px;">Occupancy Rate</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">+5% vs last month</p>
                </div>
                <div style="background: linear-gradient(135deg, #f093fb, #f5576c); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 32px;">‚Ç¨2,840</h3>
                    <p style="margin: 0; opacity: 0.9; font-size: 16px;">Total Revenue</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">+12% vs last month</p>
                </div>
                <div style="background: linear-gradient(135deg, #4facfe, #00f2fe); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 32px;">4.8</h3>
                    <p style="margin: 0; opacity: 0.9; font-size: 16px;">Avg Rating</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">Based on 24 reviews</p>
                </div>
                <div style="background: linear-gradient(135deg, #43e97b, #38f9d7); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 32px;">‚Ç¨142</h3>
                    <p style="margin: 0; opacity: 0.9; font-size: 16px;">ADR (Avg Daily Rate)</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">‚Ç¨38 above market avg</p>
                </div>
            </div>
            
            <!-- Revenue Chart Section -->
            <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="margin-bottom: 15px;">üìä Revenue Trends - October 2025</h4>
                <div style="height: 200px; background: #f8f9fa; border-radius: 6px; display: flex; align-items: end; justify-content: space-around; padding: 20px;">
                    <div style="background: #667eea; width: 30px; height: 60%; border-radius: 4px 4px 0 0; position: relative;">
                        <span style="position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); font-size: 12px;">W1</span>
                    </div>
                    <div style="background: #667eea; width: 30px; height: 80%; border-radius: 4px 4px 0 0; position: relative;">
                        <span style="position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); font-size: 12px;">W2</span>
                    </div>
                    <div style="background: #667eea; width: 30px; height: 90%; border-radius: 4px 4px 0 0; position: relative;">
                        <span style="position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); font-size: 12px;">W3</span>
                    </div>
                    <div style="background: #f5576c; width: 30px; height: 50%; border-radius: 4px 4px 0 0; position: relative;">
                        <span style="position: absolute; bottom: -25px; left: 50%; transform: translateX(-50%); font-size: 12px;">W4</span>
                        <span style="position: absolute; top: -20px; left: 50%; transform: translateX(-50%); font-size: 10px; color: #666;">Current</span>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 15px; font-size: 14px;">
                    <span>Week 1: ‚Ç¨780</span>
                    <span>Week 2: ‚Ç¨920</span>
                    <span>Week 3: ‚Ç¨980</span>
                    <span>Week 4: ‚Ç¨560 (partial)</span>
                </div>
            </div>
            
            <!-- Platform Performance -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                    <h4 style="margin-bottom: 15px;">üè™ Platform Performance</h4>
                    <div style="space-y: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="background: #4caf50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Booking.com</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;">‚Ç¨1,240</div>
                                <div style="font-size: 12px; color: #666;">44% of revenue</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="background: #e91e63; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Airbnb</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;">‚Ç¨980</div>
                                <div style="font-size: 12px; color: #666;">35% of revenue</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="background: #795548; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">LekkeSlaap</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;">‚Ç¨420</div>
                                <div style="font-size: 12px; color: #666;">15% of revenue</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <span style="background: #ff9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 12px;">Direct</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;">‚Ç¨200</div>
                                <div style="font-size: 12px; color: #666;">7% of revenue</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                    <h4 style="margin-bottom: 15px;">‚≠ê Guest Satisfaction</h4>
                    <div style="space-y: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <span>Overall Rating</span>
                            <div style="display: flex; align-items: center; gap: 5px;">
                                <span style="color: #ffc107;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span style="font-weight: bold;">4.8/5</span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <span>Cleanliness</span>
                            <div style="display: flex; align-items: center; gap: 5px;">
                                <span style="color: #ffc107;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span style="font-weight: bold;">4.9/5</span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <span>Communication</span>
                            <div style="display: flex; align-items: center; gap: 5px;">
                                <span style="color: #ffc107;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span style="font-weight: bold;">4.7/5</span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                            <span>Location</span>
                            <div style="display: flex; align-items: center; gap: 5px;">
                                <span style="color: #ffc107;">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                <span style="font-weight: bold;">4.8/5</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Maintenance & Issues Report -->
            <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                <h4 style="margin-bottom: 15px;">üîß Maintenance & Issues Summary</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="background: #d4edda; padding: 15px; border-radius: 6px; text-align: center;">
                        <h5 style="margin: 0 0 8px 0; color: #155724;">‚úÖ Resolved</h5>
                        <p style="margin: 0; font-size: 24px; font-weight: bold; color: #155724;">8</p>
                        <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">This month</p>
                    </div>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 6px; text-align: center;">
                        <h5 style="margin: 0 0 8px 0; color: #856404;">‚è≥ In Progress</h5>
                        <p style="margin: 0; font-size: 24px; font-weight: bold; color: #856404;">2</p>
                        <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Pool filter, shower head</p>
                    </div>
                    <div style="background: #f8d7da; padding: 15px; border-radius: 6px; text-align: center;">
                        <h5 style="margin: 0 0 8px 0; color: #721c24;">üö® High Priority</h5>
                        <p style="margin: 0; font-size: 24px; font-weight: bold; color: #721c24;">1</p>
                        <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Shower head replacement</p>
                    </div>
                    <div style="background: #e2e3e5; padding: 15px; border-radius: 6px; text-align: center;">
                        <h5 style="margin: 0 0 8px 0; color: #383d41;">üìä Avg Resolution</h5>
                        <p style="margin: 0; font-size: 24px; font-weight: bold; color: #383d41;">2.3</p>
                        <p style="margin: 5px 0 0 0; font-size: 12px; color: #666;">Days to resolve</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Financial Tab -->
        <div id="financial-tab" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>üí∞ Financial Dashboard</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="addTransaction()" style="width: auto; padding: 8px 16px;">+ Add Transaction</button>
                    <button class="btn" onclick="generateFinancialReport()" style="width: auto; padding: 8px 16px; background: #17a2b8;">üìä Report</button>
                    <button class="btn" onclick="exportFinancials()" style="width: auto; padding: 8px 16px; background: #28a745;">üì§ Export</button>
                </div>
            </div>
            
            <!-- Currency Toggle -->
            <div style="display: flex; gap: 10px; margin-bottom: 20px; align-items: center;">
                <span style="font-weight: bold;">Currency:</span>
                <button id="currency-eur" onclick="switchCurrency('EUR')" style="background: #007bff; color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">EUR (‚Ç¨)</button>
                <button id="currency-zar" onclick="switchCurrency('ZAR')" style="background: #6c757d; color: white; border: none; padding: 5px 15px; border-radius: 4px; cursor: pointer;">ZAR (R)</button>
                <span style="margin-left: 15px; font-size: 14px; color: #666;">Exchange Rate: 1 EUR = 19.85 ZAR</span>
            </div>
            
            <!-- Financial Overview Cards -->
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 25px;">
                <div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 28px;" id="gross-revenue">‚Ç¨2,840</h3>
                    <p style="margin: 0; opacity: 0.9;">Gross Revenue</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">October 2025</p>
                </div>
                <div style="background: linear-gradient(135deg, #dc3545, #e83e8c); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 28px;" id="total-expenses">‚Ç¨485</h3>
                    <p style="margin: 0; opacity: 0.9;">Total Expenses</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">October 2025</p>
                </div>
                <div style="background: linear-gradient(135deg, #007bff, #6f42c1); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 28px;" id="net-profit">‚Ç¨2,355</h3>
                    <p style="margin: 0; opacity: 0.9;">Net Profit</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">83% margin</p>
                </div>
                <div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px; text-align: center;">
                    <h3 style="margin: 0 0 10px 0; font-size: 28px;" id="platform-fees">‚Ç¨340</h3>
                    <p style="margin: 0; opacity: 0.9;">Platform Fees</p>
                    <p style="margin: 5px 0 0 0; font-size: 12px; opacity: 0.8;">12% of gross</p>
                </div>
            </div>
            
            <!-- Revenue Breakdown -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                    <h4 style="margin-bottom: 15px;">üí∞ Revenue by Platform (October)</h4>
                    <div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #4caf50; border-radius: 50%;"></div>
                                <span>Booking.com</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="booking-revenue">‚Ç¨1,240</div>
                                <div style="font-size: 12px; color: #666;">44%</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #e91e63; border-radius: 50%;"></div>
                                <span>Airbnb</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="airbnb-revenue">‚Ç¨980</div>
                                <div style="font-size: 12px; color: #666;">35%</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #795548; border-radius: 50%;"></div>
                                <span>LekkeSlaap</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="lekkeslaap-revenue">‚Ç¨420</div>
                                <div style="font-size: 12px; color: #666;">15%</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #ff9800; border-radius: 50%;"></div>
                                <span>Direct Bookings</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="direct-revenue">‚Ç¨200</div>
                                <div style="font-size: 12px; color: #666;">7%</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                    <h4 style="margin-bottom: 15px;">üìä Expense Categories (October)</h4>
                    <div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #dc3545; border-radius: 50%;"></div>
                                <span>Cleaning Services</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="cleaning-expenses">‚Ç¨180</div>
                                <div style="font-size: 12px; color: #666;">37%</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #ffc107; border-radius: 50%;"></div>
                                <span>Maintenance</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="maintenance-expenses">‚Ç¨125</div>
                                <div style="font-size: 12px; color: #666;">26%</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #17a2b8; border-radius: 50%;"></div>
                                <span>Utilities</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="utilities-expenses">‚Ç¨90</div>
                                <div style="font-size: 12px; color: #666;">19%</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #f0f0f0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #6c757d; border-radius: 50%;"></div>
                                <span>Supplies</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="supplies-expenses">‚Ç¨55</div>
                                <div style="font-size: 12px; color: #666;">11%</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px 0;">
                            <div style="display: flex; align-items: center; gap: 10px;">
                                <div style="width: 12px; height: 12px; background: #6f42c1; border-radius: 50%;"></div>
                                <span>Insurance</span>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-weight: bold;" id="insurance-expenses">‚Ç¨35</div>
                                <div style="font-size: 12px; color: #666;">7%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recent Transactions -->
            <div style="background: #fff; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4>üí≥ Recent Transactions</h4>
                    <button onclick="viewAllTransactions()" style="background: none; border: 1px solid #007bff; color: #007bff; padding: 5px 15px; border-radius: 4px; cursor: pointer;">View All</button>
                </div>
                
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                                <th style="padding: 12px; text-align: left; font-weight: bold;">Date</th>
                                <th style="padding: 12px; text-align: left; font-weight: bold;">Description</th>
                                <th style="padding: 12px; text-align: left; font-weight: bold;">Category</th>
                                <th style="padding: 12px; text-align: left; font-weight: bold;">Property</th>
                                <th style="padding: 12px; text-align: right; font-weight: bold;">Amount</th>
                                <th style="padding: 12px; text-align: center; font-weight: bold;">Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style="border-bottom: 1px solid #f0f0f0;">
                                <td style="padding: 12px;">Oct 16, 2025</td>
                                <td style="padding: 12px;">Weber Booking Payment</td>
                                <td style="padding: 12px;"><span style="background: #d4edda; color: #155724; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Revenue</span></td>
                                <td style="padding: 12px;">TV House</td>
                                <td style="padding: 12px; text-align: right; font-weight: bold; color: #28a745;">+‚Ç¨320.00</td>
                                <td style="padding: 12px; text-align: center;"><span style="background: #d4edda; color: #155724; padding: 2px 8px; border-radius: 12px; font-size: 12px;">‚úÖ Completed</span></td>
                            </tr>
                            <tr style="border-bottom: 1px solid #f0f0f0;">
                                <td style="padding: 12px;">Oct 15, 2025</td>
                                <td style="padding: 12px;">Weekly Cleaning - Spiwe</td>
                                <td style="padding: 12px;"><span style="background: #f8d7da; color: #721c24; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Cleaning</span></td>
                                <td style="padding: 12px;">Both</td>
                                <td style="padding: 12px; text-align: right; font-weight: bold; color: #dc3545;">-‚Ç¨45.00</td>
                                <td style="padding: 12px; text-align: center;"><span style="background: #d4edda; color: #155724; padding: 2px 8px; border-radius: 12px; font-size: 12px;">‚úÖ Paid</span></td>
                            </tr>
                            <tr style="border-bottom: 1px solid #f0f0f0;">
                                <td style="padding: 12px;">Oct 14, 2025</td>
                                <td style="padding: 12px;">Electricity Bill</td>
                                <td style="padding: 12px;"><span style="background: #fff3cd; color: #856404; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Utilities</span></td>
                                <td style="padding: 12px;">Speranta</td>
                                <td style="padding: 12px; text-align: right; font-weight: bold; color: #dc3545;">-‚Ç¨35.00</td>
                                <td style="padding: 12px; text-align: center;"><span style="background: #d4edda; color: #155724; padding: 2px 8px; border-radius: 12px; font-size: 12px;">‚úÖ Paid</span></td>
                            </tr>
                            <tr style="border-bottom: 1px solid #f0f0f0;">
                                <td style="padding: 12px;">Oct 13, 2025</td>
                                <td style="padding: 12px;">Airbnb Commission</td>
                                <td style="padding: 12px;"><span style="background: #e2e3e5; color: #495057; padding: 2px 8px; border-radius: 12px; font-size: 12px;">Platform Fee</span></td>
                                <td style="padding: 12px;">Speranta</td>
                                <td style="padding: 12px; text-align: right; font-weight: bold; color: #dc3545;">-‚Ç¨42.00</td>
                                <td style="padding: 12px; text-align: center;"><span style="background: #fff3cd; color: #856404; padding: 2px 8px; border-radius: 12px; font-size: 12px;">‚è≥ Pending</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Tax Information -->
            <div style="background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px;">
                <h4 style="margin-bottom: 15px;">üìã Tax Summary (October 2025)</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="background: #fff; padding: 15px; border-radius: 6px; border: 1px solid #dee2e6;">
                        <h6 style="margin: 0 0 8px 0; color: #6c757d;">Taxable Income</h6>
                        <p style="margin: 0; font-size: 20px; font-weight: bold;" id="taxable-income">‚Ç¨2,355</p>
                    </div>
                    <div style="background: #fff; padding: 15px; border-radius: 6px; border: 1px solid #dee2e6;">
                        <h6 style="margin: 0 0 8px 0; color: #6c757d;">Estimated VAT (15%)</h6>
                        <p style="margin: 0; font-size: 20px; font-weight: bold;" id="estimated-vat">‚Ç¨353</p>
                    </div>
                    <div style="background: #fff; padding: 15px; border-radius: 6px; border: 1px solid #dee2e6;">
                        <h6 style="margin: 0 0 8px 0; color: #6c757d;">Deductible Expenses</h6>
                        <p style="margin: 0; font-size: 20px; font-weight: bold;" id="deductible-expenses">‚Ç¨485</p>
                    </div>
                    <div style="background: #fff; padding: 15px; border-radius: 6px; border: 1px solid #dee2e6;">
                        <h6 style="margin: 0 0 8px 0; color: #6c757d;">Net Taxable</h6>
                        <p style="margin: 0; font-size: 20px; font-weight: bold;" id="net-taxable">‚Ç¨1,870</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function fillAdminCredentials() {
            document.getElementById('email').value = 'sn_apt_management@outlook.com';
            document.getElementById('password').value = 'Sevilla2015!';
        }

        function fillNinaCredentials() {
            document.getElementById('email').value = 'vanwyk.nina@gmail.com';
            document.getElementById('password').value = 'HelloWorld1!';
        }

        function login() {
            const emailElement = document.getElementById('email');
            const passwordElement = document.getElementById('password');
            
            const email = emailElement ? emailElement.value : '';
            const password = passwordElement ? passwordElement.value : '';
            
            // Define users and their access
            const users = {
                'sn_apt_management@outlook.com': {
                    password: 'Sevilla2015!',
                    name: 'Nicole and Silja',
                    role: 'admin',
                    restrictions: []
                },
                'vanwyk.nina@gmail.com': {
                    password: 'HelloWorld1!',
                    name: 'Nina Williams',
                    role: 'property-manager',
                    restrictions: ['reports', 'financial']
                },
                'customer@nyxtraining.com': {
                    password: 'password123',
                    name: 'Customer User',
                    role: 'customer',
                    restrictions: ['reports', 'financial', 'domestic', 'tasks']
                }
            };
            
            // Check credentials
            const user = users[email];
            if (!user || user.password !== password) {
                alert('Invalid email or password. Please try again.');
                return;
            }
            
            // Store current user info
            window.currentUser = user;
            
            // Hide login section and show dashboard
            document.getElementById('loginSection').style.display = 'none';
            document.getElementById('quickDashboard').style.display = 'block';
            document.getElementById('dashboardSection').style.display = 'block';
            
            // Update welcome message (now that dashboard is visible)
            const welcomeElement = document.querySelector('.dashboard-header h2');
            if (welcomeElement) {
                welcomeElement.textContent = `Welcome back, ${user.name}!`;
            }
            
            // Update the welcome span as well
            const welcomeSpan = document.querySelector('.dashboard-title span:last-child');
            if (welcomeSpan) {
                welcomeSpan.textContent = `üëã Welcome, ${user.name}!`;
            }
            
            // Hide restricted tabs
            hideRestrictedTabs(user.restrictions);
            
            // Trigger real data load after successful login
            triggerRealDataLoad();
        }
        
        function hideRestrictedTabs(restrictions) {
            console.log('hideRestrictedTabs called with:', restrictions);
            
            // Show all tabs first
            const allTabs = document.querySelectorAll('.nav-tab');
            console.log('Found tabs:', allTabs.length);
            allTabs.forEach(tab => {
                tab.style.display = 'inline-block';
            });
            
            // Hide restricted tabs using more specific selectors
            if (restrictions.includes('reports')) {
                const reportsTab = document.querySelector('button[onclick="showTab(\'reports\')"]');
                if (reportsTab) {
                    reportsTab.style.display = 'none';
                    console.log('Hidden Reports tab');
                } else {
                    console.log('Reports tab not found');
                }
            }
            
            if (restrictions.includes('financial')) {
                const financialTab = document.querySelector('button[onclick="showTab(\'financial\')"]');
                if (financialTab) {
                    financialTab.style.display = 'none';
                    console.log('Hidden Financial tab');
                } else {
                    console.log('Financial tab not found');
                }
            }
            
            if (restrictions.includes('domestic')) {
                const domesticTab = document.querySelector('button[onclick="showTab(\'domestic\')"]');
                if (domesticTab) {
                    domesticTab.style.display = 'none';
                    console.log('Hidden Domestic tab');
                }
            }
            
            if (restrictions.includes('tasks')) {
                const tasksTab = document.querySelector('button[onclick="showTab(\'tasks\')"]');
                if (tasksTab) {
                    tasksTab.style.display = 'none';
                    console.log('Hidden Tasks tab');
                }
            }
        }

        function showTab(tabName) {
            // Check if user has access to this tab
            if (window.currentUser && window.currentUser.restrictions.includes(tabName)) {
                alert(`Access denied. You don't have permission to view the ${tabName} section.`);
                return;
            }
            
            // Hide all tabs
            var tabs = document.getElementsByClassName('tab-content');
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            // Hide all nav tabs
            var navTabs = document.getElementsByClassName('nav-tab');
            for (var i = 0; i < navTabs.length; i++) {
                navTabs[i].classList.remove('active');
            }
            
            // Show selected tab
            var selectedTab = document.getElementById(tabName + '-tab');
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Mark active nav tab
            var navButtons = document.querySelectorAll('[onclick*="' + tabName + '"]');
            for (var i = 0; i < navButtons.length; i++) {
                if (navButtons[i].getAttribute('onclick').includes('showTab')) {
                    navButtons[i].classList.add('active');
                    break;
                }
            }
            
            // For check-in tab, show default subtab
            if (tabName === 'checkin') {
                showCheckinSubtab('bookings');
            }
        }

        function showCheckinSubtab(subtabName) {
            // Hide all subtab contents
            var subtabs = document.getElementsByClassName('subtab-content');
            for (var i = 0; i < subtabs.length; i++) {
                subtabs[i].classList.remove('active');
            }
            
            // Remove active class from all subtab buttons
            var subtabBtns = document.getElementsByClassName('subtab-btn');
            for (var i = 0; i < subtabBtns.length; i++) {
                subtabBtns[i].classList.remove('active');
            }
            
            // Show selected subtab content
            var selectedSubtab = document.getElementById('checkin-' + subtabName + '-subtab');
            if (selectedSubtab) {
                selectedSubtab.classList.add('active');
            }
            
            // Add active class to the correct button
            var subtabButtons = document.querySelectorAll('[onclick*="' + subtabName + '"]');
            for (var i = 0; i < subtabButtons.length; i++) {
                if (subtabButtons[i].getAttribute('onclick').includes('showCheckinSubtab')) {
                    subtabButtons[i].classList.add('active');
                    break;
                }
            }
        }
        
        // Task Management Functions
        function editTaskTitle(element) {
            const currentText = element.innerText;
            const input = document.createElement('input');
            input.type = 'text';
            input.value = currentText;
            input.style.width = '100%';
            input.style.padding = '5px';
            input.style.fontSize = '16px';
            input.style.fontWeight = 'bold';
            
            input.onblur = function() {
                element.innerText = this.value;
            };
            
            input.onkeypress = function(e) {
                if (e.key === 'Enter') {
                    this.blur();
                }
            };
            
            element.innerHTML = '';
            element.appendChild(input);
            input.focus();
            input.select();
        }
        
        function editDescription(element) {
            const currentText = element.innerText;
            const textarea = document.createElement('textarea');
            textarea.value = currentText;
            textarea.style.width = '100%';
            textarea.style.padding = '5px';
            textarea.style.minHeight = '60px';
            
            textarea.onblur = function() {
                element.innerText = this.value;
            };
            
            textarea.onkeypress = function(e) {
                if (e.key === 'Enter' && e.ctrlKey) {
                    this.blur();
                }
            };
            
            element.innerHTML = '';
            element.appendChild(textarea);
            textarea.focus();
        }
        
        function editAssignee(element) {
            const select = document.createElement('select');
            select.innerHTML = `
                <option value="Nicole">Nicole</option>
                <option value="Nina">Nina</option>
                <option value="Spiwe">Spiwe</option>
                <option value="Patricia">Patricia</option>
            `;
            
            select.onchange = function() {
                element.innerHTML = `üë§ <strong>Assigned:</strong> ${this.value}`;
            };
            
            element.innerHTML = '';
            element.appendChild(select);
            select.focus();
        }
        
        function editProperty(element) {
            const select = document.createElement('select');
            select.innerHTML = `
                <option value="Speranta">Speranta</option>
                <option value="TV House">TV House</option>
                <option value="Both">Both</option>
            `;
            
            select.onchange = function() {
                element.innerHTML = `üè¢ <strong>Property:</strong> ${this.value}`;
            };
            
            element.innerHTML = '';
            element.appendChild(select);
            select.focus();
        }
        
        function editDueDate(element) {
            const input = document.createElement('input');
            input.type = 'date';
            
            input.onchange = function() {
                const date = new Date(this.value);
                const formattedDate = date.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                });
                element.innerHTML = `üìÖ <strong>Due:</strong> ${formattedDate}`;
            };
            
            element.innerHTML = '';
            element.appendChild(input);
            input.focus();
        }
        
        function editPriority(element) {
            const select = document.createElement('select');
            select.innerHTML = `
                <option value="High">üî¥ High</option>
                <option value="Medium">üü° Medium</option>
                <option value="Low">üü¢ Low</option>
            `;
            
            select.onchange = function() {
                element.innerHTML = `<strong>Priority:</strong> ${this.value}`;
            };
            
            element.innerHTML = '';
            element.appendChild(select);
            select.focus();
        }
        
        function updateTaskStatus(checkbox) {
            const taskDiv = checkbox.closest('div[style*="border-left"]');
            const title = taskDiv.querySelector('h4');
            
            if (checkbox.checked) {
                title.style.textDecoration = 'line-through';
                title.style.color = '#6c757d';
                taskDiv.style.background = '#d4edda';
                taskDiv.style.borderLeftColor = '#28a745';
            } else {
                title.style.textDecoration = 'none';
                title.style.color = 'inherit';
                taskDiv.style.background = '#fff3cd';
                taskDiv.style.borderLeftColor = '#ffc107';
            }
        }
        
        function openAddTaskModal() {
            alert('Add Task Modal would open here. This allows creating new tasks with title, description, assignee, property, priority, and due date.');
        }
        
        function openEditTaskModal(taskId) {
            alert('Edit Task Modal for task ' + taskId + ' would open here. This allows editing all task details in a popup.');
        }
        
        function duplicateTask(taskId) {
            if (confirm('Duplicate this task?')) {
                alert('Task ' + taskId + ' would be duplicated with a "Copy of" prefix.');
            }
        }
        
        function deleteTask(taskId) {
            if (confirm('Are you sure you want to delete this task?')) {
                alert('Task ' + taskId + ' would be deleted.');
            }
        }
        
        // Booking Management Functions
        function openAddBookingModal() {
            alert('Add Manual Booking Modal would open here. This allows creating direct bookings with guest details, dates, rates, and property assignment.');
        }
        
        function viewBookingDetails(bookingId) {
            alert('Booking Details for ' + bookingId + ' would open here showing full guest information, payment status, special requests, and booking history.');
        }
        
        function contactGuest(bookingId) {
            alert('Guest Communication Modal for ' + bookingId + ' would open here with templates for check-in instructions, welcome messages, and support.');
        }
        
        function prepareCheckIn(bookingId) {
            alert('Check-in Preparation for ' + bookingId + ' would start here, including property readiness checklist, access code generation, and welcome package setup.');
        }
        
        // Financial Management Functions
        function switchCurrency(currency) {
            const eurBtn = document.getElementById('currency-eur');
            const zarBtn = document.getElementById('currency-zar');
            
            if (currency === 'EUR') {
                eurBtn.style.background = '#007bff';
                zarBtn.style.background = '#6c757d';
                // Update all financial values to EUR
                document.getElementById('gross-revenue').textContent = '‚Ç¨2,840';
                document.getElementById('total-expenses').textContent = '‚Ç¨485';
                document.getElementById('net-profit').textContent = '‚Ç¨2,355';
                document.getElementById('platform-fees').textContent = '‚Ç¨340';
            } else {
                eurBtn.style.background = '#6c757d';
                zarBtn.style.background = '#007bff';
                // Update all financial values to ZAR (multiply by 19.85)
                document.getElementById('gross-revenue').textContent = 'R56,404';
                document.getElementById('total-expenses').textContent = 'R9,627';
                document.getElementById('net-profit').textContent = 'R46,747';
                document.getElementById('platform-fees').textContent = 'R6,749';
            }
        }
        
        function addTransaction() {
            alert('Add Transaction Modal would open here allowing entry of income/expense with category, description, amount, date, and property assignment.');
        }
        
        function generateFinancialReport() {
            alert('Financial Report Generator would open here with options for P&L statements, tax reports, platform performance, and custom date ranges.');
        }
        
        function exportFinancials() {
            alert('Export Modal would open here with options for CSV, Excel, PDF formats and date range selection for accounting software integration.');
        }
        
        function viewAllTransactions() {
            alert('Full Transaction History would open here with advanced filtering, search, and bulk operations for financial management.');
        }
        
        // Invoice Functions
        function generateInvoice() {
            alert('Invoice Generator would open here with booking selection, itemized billing, tax calculations, and multiple format options.');
        }
        
        function exportInvoices() {
            alert('Invoice Export Modal would open here with batch operations, accounting software integration, and custom report generation.');
        }
        
        function viewInvoice(invoiceId) {
            alert('Invoice Viewer for ' + invoiceId + ' would open here with detailed breakdown, payment history, and action buttons.');
        }
        
        function downloadInvoice(invoiceId) {
            alert('Invoice ' + invoiceId + ' would be downloaded as PDF with professional formatting and branding.');
        }
        
        function sendReminder(invoiceId) {
            alert('Payment Reminder for ' + invoiceId + ' would be sent via email with professional template and payment link.');
        }
        
        function editInvoice(invoiceId) {
            alert('Invoice Editor for ' + invoiceId + ' would open here allowing modifications to line items, taxes, and terms.');
        }
        
        function sendInvoice(invoiceId) {
            alert('Invoice ' + invoiceId + ' would be sent via email to guest with payment instructions and professional formatting.');
        }
        
        function sendUrgentReminder(invoiceId) {
            alert('Urgent Payment Notice for ' + invoiceId + ' would be sent with escalated language and collection procedures.');
        }
        
        function initiateCollection(invoiceId) {
            alert('Collection Process for ' + invoiceId + ' would be initiated including legal notices and debt collection procedures.');
        }
        
        // Reports Functions
        function generateReport() {
            alert('Custom Report Generator would open here with advanced analytics, KPI selection, and automated scheduling options.');
        }
        
        function scheduleReport() {
            alert('Report Scheduler would open here allowing automated report generation and delivery to stakeholders.');
        }
        
        function refreshReports() {
            alert('Reports would be refreshed with latest data from all platforms and internal systems.');
        }
        
        // Check-in Management Functions
        function startCheckIn() {
            alert('New Check-in Process would start here with guest verification, room assignment, and welcome package preparation.');
        }
        
        function prepareProperty() {
            alert('Property Preparation Checklist would open here including cleaning status, amenities check, and readiness confirmation.');
        }
        
        function sendWelcomeMessage() {
            alert('Welcome Message Template would open here with property information, WiFi details, and local recommendations.');
        }
        
        function viewCheckInDetails(guestId) {
            alert('Check-in Details for ' + guestId + ' would show guest information, arrival time, special requests, and completion status.');
        }
        
        function prepareCheckIn(guestId) {
            alert('Check-in Preparation for ' + guestId + ' would begin including room setup, access code generation, and arrival coordination.');
        }
        
        function sendPreArrivalMessage(guestId) {
            alert('Pre-arrival Message for ' + guestId + ' would be sent with check-in instructions, property details, and contact information.');
        }
        
        // Monthly Inspection Functions
        function startNewInspection() {
            alert('New Monthly Inspection would be started with property selection, date scheduling, and checklist preparation.');
        }
        
        function loadInspectionHistory() {
            alert('Inspection History would be loaded showing previous inspections, trends, and comparative analysis.');
        }
        
        function editInspectionCategory(category) {
            alert('Editing ' + category + ' inspection category with custom checklist items, photo uploads, and detailed notes.');
        }
        
        function saveInspectionDraft() {
            alert('Inspection Draft would be saved allowing continuation later while preserving all current progress and notes.');
        }
        
        function completeInspection() {
            if (confirm('Are you sure you want to complete this inspection? This action cannot be undone.')) {
                alert('Inspection would be marked complete with digital signature, timestamp, and automatic task generation for any issues found.');
            }
        }
        
        function generateInspectionReport() {
            alert('Detailed Inspection Report would be generated with photos, issue summaries, action items, and comparison to previous inspections.');
        }
        
        // Knowledge Base Functions
        function openAddArticleModal() {
            alert('Add Article Modal would open here allowing creation of new knowledge base articles with categories, tags, and rich text formatting.');
        }
        
        function filterCategory(category) {
            alert('Filtering knowledge base articles by category: ' + category + '. Articles would be dynamically filtered and displayed.');
        }
        
        function editArticle(articleId) {
            alert('Article Editor for article ' + articleId + ' would open with rich text editing, image uploads, and category management.');
        }

        // ===========================================
        // REAL BOOKING DATA INTEGRATION SYSTEM
        // ===========================================
        
        const PROPERTY_ICAL_FEEDS = {
            speranta: {
                name: 'Speranta (35 Athens Road Blouberg)',
                feeds: {
                    booking: 'https://ical.booking.com/v1/export?t=8123e217-45b4-403d-8fa0-9dcc65c26800',
                    lekkeslaap: 'https://www.lekkeslaap.co.za/suppliers/icalendar.ics?t=bXEzOHNicTJQT3Nkd1dHb1ZSaXhRUT09',
                    fewo: 'http://www.fewo-direkt.de/icalendar/12b719114ecd42adab4e9ade2d2458e6.ics?nonTentative',
                    airbnb: 'https://www.airbnb.com/calendar/ical/1237076374831130516.ics?s=01582d0497e99114aa6013156146cea4&locale=en-GB'
                },
                rates: {
                    booking: { low: 850, high: 1200 },
                    lekkeslaap: { low: 800, high: 1100 },
                    fewo: { low: 900, high: 1300 },
                    airbnb: { low: 950, high: 1400 }
                }
            },
            tvhouse: {
                name: 'TV House (110 Athens Road Tableview)',
                feeds: {
                    booking: 'https://ical.booking.com/v1/export?t=ea29c451-4d0b-4fa4-b7a8-e879a33a8940',
                    lekkeslaap: 'https://www.lekkeslaap.co.za/suppliers/icalendar.ics?t=QzZ2aFlFVHhxYnoxdGRVL3ZwelRGUT09',
                    airbnb: 'https://www.airbnb.com/calendar/ical/1402174824640448492.ics?s=373c5a71c137230a72f928e88728dcf3&locale=en-GB'
                },
                rates: {
                    booking: { low: 750, high: 1050 },
                    lekkeslaap: { low: 700, high: 950 },
                    airbnb: { low: 850, high: 1200 }
                }
            }
        };

        // Global booking data storage
        let globalBookingData = {
            speranta: [],
            tvhouse: [],
            lastUpdated: null
        };

        // CORS Proxy for iCal feeds
        const CORS_PROXY = 'https://cors-anywhere.herokuapp.com/';
        const CORS_PROXY_ALT = 'https://api.allorigins.win/raw?url=';

        // iCal Parser Function
        function parseICalData(icalText, platform) {
            const events = [];
            const lines = icalText.split('\n');
            let currentEvent = {};
            let inEvent = false;

            for (let line of lines) {
                line = line.trim();
                
                if (line === 'BEGIN:VEVENT') {
                    inEvent = true;
                    currentEvent = { platform: platform };
                } else if (line === 'END:VEVENT' && inEvent) {
                    if (currentEvent.start && currentEvent.end) {
                        events.push(currentEvent);
                    }
                    currentEvent = {};
                    inEvent = false;
                } else if (inEvent) {
                    if (line.startsWith('DTSTART:')) {
                        currentEvent.start = parseICalDate(line.split(':')[1]);
                    } else if (line.startsWith('DTEND:')) {
                        currentEvent.end = parseICalDate(line.split(':')[1]);
                    } else if (line.startsWith('SUMMARY:')) {
                        currentEvent.summary = line.split(':')[1] || 'Booking';
                    } else if (line.startsWith('DESCRIPTION:')) {
                        currentEvent.description = line.split(':')[1] || '';
                    }
                }
            }
            
            return events;
        }

        function parseICalDate(dateString) {
            // Handle different iCal date formats
            if (dateString.length === 8) { // YYYYMMDD
                return new Date(
                    dateString.substring(0, 4),
                    dateString.substring(4, 6) - 1,
                    dateString.substring(6, 8)
                );
            } else if (dateString.includes('T')) { // YYYYMMDDTHHMMSS
                const date = dateString.split('T')[0];
                return new Date(
                    date.substring(0, 4),
                    date.substring(4, 6) - 1,
                    date.substring(6, 8)
                );
            }
            return new Date(dateString);
        }

        // Fetch booking data from all platforms
        async function fetchRealBookingData() {
            console.log('üî• FETCHING REAL BOOKING DATA...');
            const statusElement = document.getElementById('booking-status');
            if (statusElement) {
                statusElement.textContent = 'Loading real booking data...';
                statusElement.style.color = '#ffc107';
            }

            try {
                const allBookings = { speranta: [], tvhouse: [] };

                console.log('üìã iCal feeds configured:', PROPERTY_ICAL_FEEDS);

                // Fetch data for both properties
                for (const [propertyKey, property] of Object.entries(PROPERTY_ICAL_FEEDS)) {
                    console.log(`üìç Fetching bookings for ${property.name}`);
                    
                    for (const [platform, feedUrl] of Object.entries(property.feeds)) {
                        try {
                            console.log(`üåê Fetching ${platform} data for ${propertyKey}`);
                            console.log(`üì° URL: ${feedUrl}`);
                            
                            // Try different CORS approaches
                            let icalData;
                            try {
                                const proxyUrl = CORS_PROXY_ALT + encodeURIComponent(feedUrl);
                                console.log(`üîÑ Trying primary proxy: ${proxyUrl}`);
                                const response = await fetch(proxyUrl);
                                icalData = await response.text();
                                console.log(`‚úÖ Primary proxy success for ${platform}`);
                            } catch (e) {
                                console.warn(`‚ö†Ô∏è CORS proxy failed for ${platform}, trying alternative...`);
                                const altProxyUrl = CORS_PROXY + feedUrl;
                                console.log(`üîÑ Trying alternative proxy: ${altProxyUrl}`);
                                const response = await fetch(altProxyUrl);
                                icalData = await response.text();
                                console.log(`‚úÖ Alternative proxy success for ${platform}`);
                            }

                            if (icalData && icalData.includes('BEGIN:VCALENDAR')) {
                                const events = parseICalData(icalData, platform);
                                allBookings[propertyKey] = allBookings[propertyKey].concat(events);
                                console.log(`üéâ Found ${events.length} events from ${platform} for ${propertyKey}`);
                                
                                // Show immediate feedback
                                if (statusElement) {
                                    statusElement.innerHTML = `Loading... Found ${allBookings.speranta.length + allBookings.tvhouse.length} bookings so far`;
                                }
                            } else {
                                console.log(`‚ùå No valid iCal data from ${platform} for ${propertyKey}`);
                            }
                        } catch (error) {
                            console.error(`üí• Error fetching ${platform} data for ${propertyKey}:`, error);
                        }
                    }
                }

                // Store the data globally
                globalBookingData = {
                    speranta: allBookings.speranta,
                    tvhouse: allBookings.tvhouse,
                    lastUpdated: new Date()
                };

                const totalBookings = allBookings.speranta.length + allBookings.tvhouse.length;
                console.log(`üéØ TOTAL REAL BOOKINGS LOADED: ${totalBookings}`);

                // Update UI with real data
                updateBookingDashboard();
                updateFinancialMetrics();

                if (statusElement) {
                    if (totalBookings > 0) {
                        statusElement.innerHTML = `‚úÖ ${totalBookings} real bookings loaded! Last updated: ${new Date().toLocaleTimeString()}`;
                        statusElement.style.color = '#28a745';
                    } else {
                        statusElement.innerHTML = `‚ö†Ô∏è Connected but no bookings found. Last checked: ${new Date().toLocaleTimeString()}`;
                        statusElement.style.color = '#ffc107';
                    }
                }

                console.log('üöÄ Real booking data loaded successfully:', globalBookingData);
                
            } catch (error) {
                console.error('üí• Error fetching booking data:', error);
                if (statusElement) {
                    statusElement.innerHTML = `‚ùå Error loading booking data: ${error.message}`;
                    statusElement.style.color = '#dc3545';
                }
            }
        }

        // Update dashboard with real booking data
        function updateBookingDashboard() {
            const now = new Date();
            const thisMonth = now.getMonth();
            const nextMonth = (thisMonth + 1) % 12;

            let currentOccupancy = 0;
            let totalDays = new Date(now.getFullYear(), thisMonth + 1, 0).getDate();
            let occupiedDays = 0;
            let monthlyRevenue = 0;

            // Calculate occupancy and revenue for both properties
            for (const [propertyKey, bookings] of Object.entries(globalBookingData)) {
                if (propertyKey === 'lastUpdated') continue;

                for (const booking of bookings) {
                    const start = new Date(booking.start);
                    const end = new Date(booking.end);

                    // Count days in current month
                    if (start.getMonth() === thisMonth || end.getMonth() === thisMonth) {
                        const monthStart = new Date(now.getFullYear(), thisMonth, 1);
                        const monthEnd = new Date(now.getFullYear(), thisMonth + 1, 0);
                        
                        const overlapStart = new Date(Math.max(start.getTime(), monthStart.getTime()));
                        const overlapEnd = new Date(Math.min(end.getTime(), monthEnd.getTime()));
                        
                        if (overlapStart <= overlapEnd) {
                            const nights = Math.ceil((overlapEnd - overlapStart) / (1000 * 60 * 60 * 24));
                            occupiedDays += nights;

                            // Calculate revenue based on platform and property
                            const property = PROPERTY_ICAL_FEEDS[propertyKey];
                            if (property && property.rates[booking.platform]) {
                                const rate = property.rates[booking.platform];
                                const avgRate = (rate.low + rate.high) / 2;
                                monthlyRevenue += nights * avgRate;
                            }
                        }
                    }
                }
            }

            // Update occupancy rate
            currentOccupancy = Math.min(100, Math.round((occupiedDays / (totalDays * 2)) * 100)); // 2 properties

            // Update dashboard elements
            const occupancyElement = document.querySelector('.compact-metric.occupancy div:nth-child(2)');
            if (occupancyElement) {
                occupancyElement.textContent = `${currentOccupancy}%`;
            }

            const revenueElement = document.querySelector('.compact-metric.revenue div:nth-child(2)');
            if (revenueElement) {
                revenueElement.textContent = `R${monthlyRevenue.toLocaleString()}`;
            }

            // Update booking calendar if visible
            updateBookingCalendar();
        }

        // Update booking calendar with real data
        function updateBookingCalendar() {
            const calendar = document.querySelector('.booking-calendar');
            if (!calendar) return;

            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();

            // Clear existing calendar
            calendar.innerHTML = '<h3>Live Booking Calendar</h3>';

            // Create calendar grid
            const calendarGrid = document.createElement('div');
            calendarGrid.style.cssText = `
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 2px;
                margin-top: 15px;
            `;

            // Add day headers
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            days.forEach(day => {
                const dayHeader = document.createElement('div');
                dayHeader.textContent = day;
                dayHeader.style.cssText = `
                    text-align: center;
                    font-weight: bold;
                    padding: 8px;
                    background: #f8f9fa;
                `;
                calendarGrid.appendChild(dayHeader);
            });

            // Add calendar days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

            // Empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                const emptyCell = document.createElement('div');
                emptyCell.style.padding = '8px';
                calendarGrid.appendChild(emptyCell);
            }

            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayCell = document.createElement('div');
                const dayDate = new Date(currentYear, currentMonth, day);
                
                // Check if day is booked
                let isBooked = false;
                let bookingPlatform = '';
                
                for (const [propertyKey, bookings] of Object.entries(globalBookingData)) {
                    if (propertyKey === 'lastUpdated') continue;
                    
                    for (const booking of bookings) {
                        const start = new Date(booking.start);
                        const end = new Date(booking.end);
                        
                        if (dayDate >= start && dayDate < end) {
                            isBooked = true;
                            bookingPlatform = booking.platform;
                            break;
                        }
                    }
                    if (isBooked) break;
                }

                dayCell.textContent = day;
                dayCell.style.cssText = `
                    text-align: center;
                    padding: 8px;
                    border: 1px solid #ddd;
                    cursor: pointer;
                    ${isBooked ? `background: #28a745; color: white; font-weight: bold;` : 'background: white;'}
                `;
                
                if (isBooked) {
                    dayCell.title = `Booked via ${bookingPlatform}`;
                }

                calendarGrid.appendChild(dayCell);
            }

            calendar.appendChild(calendarGrid);
        }

        // Update financial metrics with real revenue data
        function updateFinancialMetrics() {
            // This function will be called to update the Financial tab with real data
            console.log('Financial metrics updated with real booking data');
        }

        // Auto-refresh booking data every 30 minutes
        setInterval(fetchRealBookingData, 30 * 60 * 1000);

        // Add real booking data button to dashboard
        function addRealDataControls() {
            const quickDashboard = document.querySelector('.quick-dashboard .compact-metrics');
            if (quickDashboard) {
                const statusDiv = document.createElement('div');
                statusDiv.innerHTML = `
                    <div style="text-align: center; margin-top: 15px;">
                        <button onclick="fetchRealBookingData()" style="background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; margin-right: 10px;">üîÑ Refresh Real Data</button>
                        <div id="booking-status" style="font-size: 12px; color: #6c757d; margin-top: 5px;">Click to load real booking data</div>
                    </div>
                `;
                quickDashboard.appendChild(statusDiv);
            }
        }

        // ===========================================
        // LIVE CURRENCY CONVERSION (ZAR/EUR)
        // ===========================================
        
        let currentExchangeRate = 0.05; // Default rate (will be updated with live data)
        
        async function fetchLiveExchangeRate() {
            try {
                // Free currency API
                const response = await fetch('https://api.exchangerate-api.com/v4/latest/ZAR');
                const data = await response.json();
                currentExchangeRate = data.rates.EUR;
                
                console.log(`Live exchange rate: 1 ZAR = ${currentExchangeRate} EUR`);
                updateCurrencyDisplay();
            } catch (error) {
                console.error('Error fetching exchange rate:', error);
                // Fallback to estimated rate
                currentExchangeRate = 0.05;
            }
        }
        
        function convertZARtoEUR(zarAmount) {
            return (zarAmount * currentExchangeRate).toFixed(2);
        }
        
        function convertEURtoZAR(eurAmount) {
            return (eurAmount / currentExchangeRate).toFixed(0);
        }
        
        function updateCurrencyDisplay() {
            // Update any currency displays with live rates
            const currencyElements = document.querySelectorAll('[data-currency]');
            currencyElements.forEach(element => {
                const zarAmount = parseFloat(element.dataset.zarAmount || 0);
                const eurAmount = convertZARtoEUR(zarAmount);
                element.textContent = `R${zarAmount.toLocaleString()} (‚Ç¨${eurAmount})`;
            });
        }

        // ===========================================
        // CAPE TOWN WEATHER INTEGRATION
        // ===========================================
        
        async function fetchCapeFeatures() {
            try {
                // Free weather API for Cape Town
                const weatherResponse = await fetch('https://wttr.in/Cape+Town?format=j1');
                const weatherData = await weatherResponse.json();
                
                const currentWeather = weatherData.current_condition[0];
                const temp = currentWeather.temp_C;
                const desc = currentWeather.weatherDesc[0].value;
                
                // Update weather widget if it exists
                const weatherWidget = document.getElementById('weather-widget');
                if (weatherWidget) {
                    weatherWidget.innerHTML = `
                        <div style="text-align: center; padding: 10px; background: #e3f2fd; border-radius: 8px;">
                            <div style="font-size: 18px; font-weight: bold;">${temp}¬∞C</div>
                            <div style="font-size: 12px; color: #666;">${desc}</div>
                            <div style="font-size: 10px; color: #999;">Cape Town</div>
                        </div>
                    `;
                }
                
                console.log(`Cape Town weather: ${temp}¬∞C, ${desc}`);
            } catch (error) {
                console.error('Error fetching Cape Town weather:', error);
            }
        }

        // Initialize all live data systems
        document.addEventListener('DOMContentLoaded', function() {
            addRealDataControls();
            
            // Load all live data immediately
            console.log('üöÄ Starting real data load process...');
            fetchRealBookingData();
            fetchLiveExchangeRate();
            fetchCapeFeatures();
            
            // Also try after login
            setTimeout(() => {
                console.log('üîÑ Secondary data load attempt...');
                fetchRealBookingData();
            }, 5000);
            
            // Refresh rates every hour
            setInterval(fetchLiveExchangeRate, 60 * 60 * 1000);
            setInterval(fetchCapeFeatures, 30 * 60 * 1000);
        });

        // Also trigger after login
        function triggerRealDataLoad() {
            console.log('üéØ Triggering real data load after login...');
            setTimeout(() => {
                fetchRealBookingData();
                fetchLiveExchangeRate();
                fetchCapeFeatures();
            }, 1000);
        }

        // ===========================================
        // END REAL DATA INTEGRATION SYSTEM
        // ===========================================
    </script>
</body>
</html>
